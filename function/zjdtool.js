const axios = require('axios');
const CryptoJS = require('crypto-js')
const {format} = require("date-fns");
let tk = '', genKey = nullvar 

_0xodn='jsjiami.com.v6',_0xodn_=['‮_0xodn'],_0x3b72=[_0xodn,'wro/eFkzwpkZ','wrUMK8Kj','D1jCtlJvwrY=','NQpkwoE=','wozDssKdajXCocKNwqo6wpbCgcOsZ8KsPHjDuiDCuE83','wp/CpMKffzTDqMOLw6o3w5XDmMK6IcOxIjDCsizCvVB4TcO4w44uXgpwwqh4wop7S8KcwrrDmMOcw4jDnBB4XMKxwrokwqkUJMO/eVRsZhfDojIIIQTCiMOyI8OVbBRSLAQD','woQZWw==','wr91w6IJw7LDnMOpecOqO8KQQsKcKcKqw4gALsOAdjR6ZyTCqMKsXsOdCMKICsO6QsKAZMKa','w4U8wp/Cq3jCmn52BnfDv8KJZsKywqUT','E1PCrHjChw==','TjbCr8K6wp0=','DlfCvl7CmWNlEzlxEWnDgE7CpsKzw67DnkZpYsOvDsOGw5ovw7ZfPsKsYsKGS8OzRsOXO1DDr8Kgw5Juwq3DlkHCoFvDnMKSwqnCgMOpw5xRJcKrcMOqwqbCpcKzw49+w5NewpYqwqdWwo4UKsOkwrNiw5XDk2nCpMKxL8KJw6TCu8OVXHHDiUXCoQxCw4XDmsOTd8KcJ8OJTcKQwrbDsjgww5ggwoPDh1LCpSACw7bDssKcW8K9w5jDlMKpwrHCi8ObMsOxwpUPw74hH8OSJMKJAUvCicKfAcO6wqAVAMK4f1BKSHpUeMOkCsOudsOaw54Tw7bDrMKJwpo8HMKoRcK4HcOVdMK8wp07worDrQ7DnzQFWcKXWFHCuWE4esOYwrjCscKVbU/Cun3CucKQwrTCkcKIwp1L','IA5mwoA=','Xi3DhGA=','wr8fZkvDoyM=','jUMsUjViEbaMYgminN.HXcoHmh.v6=='];
if(function(_0x2743f4,_0x3fb1a4,_0x305864){
	function _0x262557(_0x12e420,_0x159a53,_0x5a10b1,_0x549630,_0x34e649,_0x48a933){
		_0x159a53=_0x159a53>>0x8,_0x34e649='po';
		var _0x173d72='shift',_0x2b02e9='push',_0x48a933='‮';
		if(_0x159a53<_0x12e420){
			while(--_0x12e420){
				_0x549630=_0x2743f4[_0x173d72]();
				if(_0x159a53===_0x12e420&&_0x48a933==='‮'&&_0x48a933.length===1){
					_0x159a53=_0x549630,_0x5a10b1=_0x2743f4[_0x34e649+'p']();
				}else if(_0x159a53&&_0x5a10b1.replace(/[UMUVEbMYgnNHXHh=]/g,'')===_0x159a53){
					_0x2743f4[_0x2b02e9](_0x549630);
				}
			}
			_0x2743f4[_0x2b02e9](_0x2743f4[_0x173d72]());
		}
		return 877679;
	};
	return _0x262557(++_0x3fb1a4,_0x305864)>>_0x3fb1a4^_0x305864;
}(_0x3b72,244,62464),_0x3b72){
	_0xodn_=_0x3b72.length^0xf4;
};
function _0x10b2(_0x45658b,_0xa6ed42){
	_0x45658b=~~'0x'.concat(_0x45658b.slice(1));
	var _0x1c3a83=_0x3b72[_0x45658b];
	if(_0x10b2.LvPUvb===undefined){
		(function(){
			var _0x563495=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;
			var _0x37b199='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
			_0x563495.atob||(_0x563495.atob=function(_0x1eac82){
				var _0x16b82d=String(_0x1eac82).replace(/=+$/,'');
				for(var _0xee2dd0=0,_0x4d50ce,_0x4339f9,_0x17dab4=0,_0x52b38d='';_0x4339f9=_0x16b82d.charAt(_0x17dab4++);~_0x4339f9&&(_0x4d50ce=_0xee2dd0%4?_0x4d50ce*64+_0x4339f9:_0x4339f9,_0xee2dd0++%4)?_0x52b38d+=String.fromCharCode(0xff&_0x4d50ce>>(-2*_0xee2dd0&0x6)):0){
					_0x4339f9=_0x37b199.indexOf(_0x4339f9);
				}
				return _0x52b38d;
			});
		}());
		function _0x565be9(_0x1ed74f,_0xa6ed42){
			var _0xc416e3=[],_0x536e9b=0,_0x7e5a8a,_0xdf715e='',_0x3b5e2b='';
			_0x1ed74f=atob(_0x1ed74f);
			for(var _0x25153a=0,_0x28040c=_0x1ed74f.length;_0x25153a<_0x28040c;_0x25153a++){
				_0x3b5e2b+='%'+('00'+_0x1ed74f.charCodeAt(_0x25153a).toString(16)).slice(-2);
			}
			_0x1ed74f=decodeURIComponent(_0x3b5e2b);
			for(var _0x38a058=0;_0x38a058<256;_0x38a058++){
				_0xc416e3[_0x38a058]=_0x38a058;
			}
			for(_0x38a058=0;_0x38a058<256;_0x38a058++){
				_0x536e9b=(_0x536e9b+_0xc416e3[_0x38a058]+_0xa6ed42.charCodeAt(_0x38a058%_0xa6ed42.length))%256;
				_0x7e5a8a=_0xc416e3[_0x38a058];
				_0xc416e3[_0x38a058]=_0xc416e3[_0x536e9b];
				_0xc416e3[_0x536e9b]=_0x7e5a8a;
			}
			_0x38a058=0;
			_0x536e9b=0;
			for(var _0x399e67=0;_0x399e67<_0x1ed74f.length;_0x399e67++){
				_0x38a058=(_0x38a058+1)%256;
				_0x536e9b=(_0x536e9b+_0xc416e3[_0x38a058])%256;
				_0x7e5a8a=_0xc416e3[_0x38a058];
				_0xc416e3[_0x38a058]=_0xc416e3[_0x536e9b];
				_0xc416e3[_0x536e9b]=_0x7e5a8a;
				_0xdf715e+=String.fromCharCode(_0x1ed74f.charCodeAt(_0x399e67)^_0xc416e3[(_0xc416e3[_0x38a058]+_0xc416e3[_0x536e9b])%256]);
			}
			return _0xdf715e;
		}
		_0x10b2.SYVfKK=_0x565be9;
		_0x10b2.DcCxBY={};
		_0x10b2.LvPUvb=true;
	}
	var _0x185efa=_0x10b2.DcCxBY[_0x45658b];
	if(_0x185efa===undefined){
		if(_0x10b2.XNcqmw===undefined){
			_0x10b2.XNcqmw=true;
		}
		_0x1c3a83=_0x10b2.SYVfKK(_0x1c3a83,_0xa6ed42);
		_0x10b2.DcCxBY[_0x45658b]=_0x1c3a83;
	}else{
		_0x1c3a83=_0x185efa;
	}
	return _0x1c3a83;
};
function zjdInit(){
	var _0x5b6562={'UHkNG':function(_0x1dee04){
			return _0x1dee04();
		},'PkhOr':'cactus.jd.com','vcwqy':_0x10b2('‮0','T5oN')};
	return new Promise(_0x3e8e66=>{
		axios.post('https://cactus.jd.com/request_algo?g_ty=ajax',_0x10b2('‫1','T5oN')+Date[_0x10b2('‫2','Y8g5')]()+_0x10b2('‫3','Cs^f'),{'headers':{'Content-Type':_0x10b2('‫4','41Yi'),'host':_0x5b6562[_0x10b2('‮5','otKY')],'Referer':_0x5b6562[_0x10b2('‫6','JEgu')],'User-Agent':_0x10b2('‫7','otKY')}})[_0x10b2('‫8',')mWR')](_0x20c5db=>{
			tk=_0x20c5db[_0x10b2('‮9','QWq9')].data[_0x10b2('‫a','brNj')].tk;
			genKey=new Function(_0x10b2('‫b','[LTK')+_0x20c5db.data[_0x10b2('‮c','net@')][_0x10b2('‫d','XS2!')][_0x10b2('‮e',')mWR')])();
			_0x5b6562.UHkNG(_0x3e8e66);
		});
	});
};
_0xodn='jsjiami.com.v6';

function zjdH5st(_0x4be4df){
	let _0x5b05fe=[{'key':'appid','value':_0x4be4df.appid},{'key':'body','value':_0x4be4df.body},{'key':'functionId','value':_0x4be4df.functionId}],_0x593076='';
	_0x5b05fe.forEach(({
		key,value
	})=>{
		_0x593076+=key+':'+value+'&';
	});
	_0x593076=_0x593076.slice(0,-1);
	let _0x24a2f4=Date.now();
	let _0x5c2223=format(_0x2f169d,'yyyyMMddhhmmssSSS');
	let _0x1ea52b=genKey(_0x55afdb,'5751706390487846',_0x5c2223.toString(),'b342e',_0x18a52d).toString(CryptoJS.enc.Hex);
	const _0x55d05d=CryptoJS.HmacSHA256(_0x593076,_0x1ea52b).toString();
	return[''.concat(_0x5c2223.toString()),''.concat('5751706390487846'),''.concat('b342e'),''.concat(tk),''.concat(_0x55d05d),'3.0',''.concat(_0x24a2f4.toString())].join(';');
};
module.exports = {zjdInit,zjdH5st}